<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>RxJava</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="stylesheets/base.css">
    <link rel="stylesheet" href="stylesheets/skeleton.css">
    <link rel="stylesheet" href="stylesheets/layout.css">
    <link rel="stylesheet" href="stylesheets/docs.css">

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
</head>
<body>
    <div class="container">
        <div class="three columns sidebar">
            <nav>
            <h3 id="logo"><a href="/">RxJava</a></h3>
                <ul id="navi">
                    
                        <li><a href="#binaries">Binaries</a></li>
                    
                        <li><a href="#examples">Examples</a></li>
                    
                        <li><a href="#observing_on_the_ui_thread">Observing on the UI thread</a></li>
                    
                        <li><a href="#observing_on_arbitrary_threads">Observing on arbitrary threads</a></li>
                    
                        <li><a href="#fragment_and_activity_life_cycle">Fragment and Activity life-cycle</a></li>
                    
                        <li><a href="#see_also">See also</a></li>
                    
                </ul>
            </nav>
        </div>
        <div class="twelve columns offset-by-three content">
            <header>
                <h1><a href="/">RxJava</a></h1>
                <div id="social">
                    <a href="http://twitter.com/share" class="twitter-share-button" data-text="RxJava" data-count="horizontal">Tweet</a>
                    <a href="http://yongjhih.github.io/RxJava/The-RxJava-Android-Module/_edit" class="button">Edit</a>
                </div>
            </header>
            <div>
                <p><p>The <code>rxjava-android</code> module contains Android-specific bindings for RxJava. It adds a number of classes to RxJava to assist in writing reactive components in Android applications.</p></p>
<ul>
<li><p>It provides a <code>Scheduler</code> that schedules an <code>Observable</code> on a given Android <code>Handler</code> thread, particularly the main UI thread.</p></li>
<li><p>It provides operators that make it easier to deal with <code>Fragment</code> and <code>Activity</code> life-cycle callbacks.</p></li>
<li><p>It provides wrappers for various Android messaging and notification components so that they can be lifted into an Rx call chain</p></li>
<li><p>It provides reusable, self-contained, reactive components for common Android use cases and UI concerns. <em>(coming soon)</em></p></li>
</ul>
<h1 id="binaries">Binaries</h1><p><p>You can find binaries and dependency information for Maven, Ivy, Gradle and others at <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22rxandroid%22">http://search.maven.org</a>.</p>
<p>Here is an example for <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22rxandroid%22">Maven</a>:</p></p>
<pre><code class="lang-xml"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>io.reactivex<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>rxandroid<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
    <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.23.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
</code></pre>
<p><p>&hellip;and for Ivy:</p></p>
<pre><code class="lang-xml"><span class="tag">&lt;<span class="title">dependency</span> <span class="attribute">org</span>=<span class="value">"io.reactivex"</span> <span class="attribute">name</span>=<span class="value">"rxandroid"</span> <span class="attribute">rev</span>=<span class="value">"0.23.0"</span> /&gt;</span>
</code></pre>
<p><p>The currently supported <code>minSdkVersion</code> is <code>10</code> (Android 2.3/Gingerbread)</p></p>
<h1 id="examples">Examples</h1><h2 id="observing_on_the_ui_thread">Observing on the UI thread</h2><p><p>You commonly deal with asynchronous tasks on Android by observing the task&#8217;s result or outcome on the main UI thread. Using vanilla Android, you would typically accomplish this with an <code>AsyncTask</code>. With RxJava you would instead declare your <code>Observable</code> to be observed on the main thread by using the <code>observeOn</code> operator:</p></p>
<pre><code class="lang-java"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReactiveFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>{

<span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="keyword">void</span> onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Observable.from(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>, <span class="string">"five"</span>)
            .subscribeOn(Schedulers.newThread())
            .observeOn(AndroidSchedulers.mainThread())
            .subscribe(<span class="comment">/* an Observer */</span>);
}
</code></pre>
<p><p>This executes the Observable on a new thread, which emits results through <code>onNext</code> on the main UI thread.</p></p>
<h2 id="observing_on_arbitrary_threads">Observing on arbitrary threads</h2><p><p>The previous example is a specialization of a more general concept: binding asynchronous communication to an Android message loop by using the <code>Handler</code> class. In order to observe an <code>Observable</code> on an arbitrary thread, create a <code>Handler</code> bound to that thread and use the <code>AndroidSchedulers.handlerThread</code> scheduler:</p></p>
<pre><code class="lang-java"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {
    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> run() {
        <span class="keyword">final</span> Handler handler = <span class="keyword">new</span> Handler(); <span class="comment">// bound to this thread</span>
        Observable.from(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>, <span class="string">"five"</span>)
                .subscribeOn(Schedulers.newThread())
                .observeOn(AndroidSchedulers.handlerThread(handler))
                .subscribe(<span class="comment">/* an Observer */</span>)

        <span class="comment">// perform work, ...</span>
    }
}, <span class="string">"custom-thread-1"</span>).start();
</code></pre>
<p><p>This executes the Observable on a new thread and emits results through <code>onNext</code> on <code>custom-thread-1</code>. (This example is contrived since you could as well call <code>observeOn(Schedulers.currentThread())</code> but it illustrates the idea.)</p></p>
<h2 id="fragment_and_activity_life_cycle">Fragment and Activity life-cycle</h2><p><p>On Android it is tricky for asynchronous actions to access framework objects in their callbacks. That&#8217;s because Android may decide to destroy an <code>Activity</code>, for instance, while a background thread is still running. The thread will attempt to access views on the now dead <code>Activity</code>, which results in a crash. (This will also create a memory leak, since your background thread holds on to the <code>Activity</code> even though it&#8217;s not visible anymore.)</p>
<p>This is still a concern when using RxJava on Android, but you can deal with the problem in a more elegant way by using <code>Subscription</code>s and a number of Observable operators. In general, when you run an <code>Observable</code> inside an <code>Activity</code> that subscribes to the result (either directly or through an inner class), you must unsubscribe from the sequence in <code>onDestroy</code>, as shown in the following example:</p></p>
<pre><code class="lang-java"><span class="comment">// MyActivity</span>
<span class="keyword">private</span> Subscription subscription;

<span class="keyword">protected</span> <span class="keyword">void</span> onCreate(Bundle savedInstanceState) {
    <span class="keyword">this</span>.subscription = observable.subscribe(<span class="keyword">this</span>);
}

...

<span class="keyword">protected</span> <span class="keyword">void</span> onDestroy() {
    <span class="keyword">this</span>.subscription.unsubscribe();
    <span class="keyword">super</span>.onDestroy();
}
</code></pre>
<p><p>This ensures that all references to the subscriber (the <code>Activity</code>) will be released as soon as possible, and no more notifications will arrive at the subscriber through <code>onNext</code>.</p>
<p>One problem with this is that if the <code>Activity</code> is destroyed because of a change in screen orientation, the Observable will fire again in <code>onCreate</code>. You can prevent this by using the <code>cache</code> or <code>replay</code> Observable operators, while making sure the Observable somehow survives the <code>Activity</code> life-cycle (for instance, by storing it in a global cache, in a Fragment, etc.) You can use either operator to ensure that when the subscriber subscribes to an Observable that&#8217;s already &ldquo;running,&rdquo; items emitted by the Observable during the span when it was detached from the <code>Activity</code> will be &ldquo;played back,&rdquo; and any in-flight notifications from the Observable will be delivered as usual.</p></p>
<h1 id="see_also">See also</h1><ul>
<li><p><a href="http://open.blogs.nytimes.com/2014/08/18/getting-groovy-with-reactive-android/?_php=true&amp;_type=blogs&amp;_php=true&amp;_type=blogs&amp;_r=1&amp;">How the New York Times is building its Android app with Groovy/RxJava</a> by Mohit Pandey</p></li>
<li><p><a href="http://mttkay.github.io/blog/2013/08/25/functional-reactive-programming-on-android-with-rxjava/">Functional Reactive Programming on Android With RxJava</a> and <a href="https://speakerdeck.com/mttkay/conquering-concurrency-bringing-the-reactive-extensions-to-the-android-platform">Conquering concurrency - bringing the Reactive Extensions to the Android platform</a> by Matthias Käppler</p></li>
<li><p><a href="https://github.com/kaushikgopal/Android-RxJava">Learning RxJava for Android by example</a> by Kaushik Gopal</p></li>
<li><p><a href="http://blog.futurice.com/top-7-tips-for-rxjava-on-android">Top 7 Tips for RxJava on Android</a> and <a href="http://www.slideshare.net/TimoTuominen1/rxjava-architectures-on-android-8-android-livecode-32531688">Rx Architectures in Android</a> by Timo Tuominen</p></li>
<li><p><a href="http://slid.es/yaroslavheriatovych/frponandroid">FRP on Android</a> by Yaroslav Heriatovych</p></li>
<li><p><a href="http://blog.futurice.com/tech-pick-of-the-week-rx-for-net-and-rxjava-for-android">Rx for .NET and RxJava for Android</a> by Olli Salonen</p></li>
<li><p><a href="http://blog.futurice.com/android-development-has-its-own-swift">RxJava in Xtend for Android</a> by Andre Medeiros</p></li>
<li><p><a href="http://mnmlst-dvlpr.blogspot.de/2014/07/rxjava-and-xtend.html">RxJava and Xtend</a> by Stefan Oehme</p></li>
<li><p>Grokking RxJava, <a href="http://blog.danlew.net/2014/09/15/grokking-rxjava-part-1/">Part 1: The Basics</a>, <a href="http://blog.danlew.net/2014/09/22/grokking-rxjava-part-2/">Part 2: Operator, Operator</a>, <a href="http://blog.danlew.net/2014/09/30/grokking-rxjava-part-3/">Part 3: Reactive with Benefits</a>, <a href="http://blog.danlew.net/2014/10/08/grokking-rxjava-part-4/">Part 4: Reactive Android</a> - published in Sep/Oct 2014 by Daniel Lew</p></li>
</ul>

            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</body>
</html>
