<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>RxJava</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="stylesheets/base.css">
    <link rel="stylesheet" href="stylesheets/skeleton.css">
    <link rel="stylesheet" href="stylesheets/layout.css">
    <link rel="stylesheet" href="stylesheets/docs.css">

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
</head>
<body>
    <div class="container">
        <div class="three columns sidebar">
            <nav>
            <h3 id="logo"><a href="/">RxJava</a></h3>
                <ul id="navi">
                    
                        <li><a href="#hello_world!">Hello World!</a></li>
                    
                        <li><a href="#java">Java</a></li>
                    
                        <li><a href="#groovy">Groovy</a></li>
                    
                        <li><a href="#clojure">Clojure</a></li>
                    
                        <li><a href="#scala">Scala</a></li>
                    
                        <li><a href="#how_to_design_using_rxjava">How to Design Using RxJava</a></li>
                    
                        <li><a href="#creating_observables">Creating Observables</a></li>
                    
                        <li><a href="#creating_an_observable_from_an_existing_data_structure">Creating an Observable from an Existing Data Structure</a></li>
                    
                        <li><a href="#creating_an_observable_via_the_&#x60;create( )&#x60;_method">Creating an Observable via the &#x60;create( )&#x60; method</a></li>
                    
                        <li><a href="#synchronous_observable_example">Synchronous Observable Example</a></li>
                    
                        <li><a href="#asynchronous_observable_example">Asynchronous Observable Example</a></li>
                    
                        <li><a href="#transforming_observables_with_operators">Transforming Observables with Operators</a></li>
                    
                        <li><a href="#error_handling">Error Handling</a></li>
                    
                </ul>
            </nav>
        </div>
        <div class="twelve columns offset-by-three content">
            <header>
                <h1><a href="/">RxJava</a></h1>
                <div id="social">
                    <a href="http://twitter.com/share" class="twitter-share-button" data-text="RxJava" data-count="horizontal">Tweet</a>
                    <a href="http://yongjhih.github.io/RxJava/How-To-Use-RxJava/_edit" class="button">Edit</a>
                </div>
            </header>
            <div>
                <h1 id="hello_world!">Hello World!</h1><p><p>The following sample implementations of “Hello World” in Java, Groovy, Clojure, and Scala create an Observable from a list of Strings, and then subscribe to this Observable with a method that prints “Hello <em>String</em>!” for each string emitted by the Observable.</p>
<p>You can find additional code examples in the <code>/src/examples</code> folders of each <a href="https://github.com/ReactiveX/">language adaptor</a>:</p></p>
<ul>
<li><p><a href="https://github.com/ReactiveX/RxGroovy/tree/1.x/src/examples/groovy/rx/lang/groovy/examples">RxGroovy examples</a></p></li>
<li><p><a href="https://github.com/ReactiveX/RxClojure/tree/0.x/src/examples/clojure/rx/lang/clojure/examples">RxClojure examples</a></p></li>
<li><p><a href="https://github.com/ReactiveX/RxScala/tree/0.x/examples/src/main/scala">RxScala examples</a></p></li>
</ul>
<h3 id="java">Java</h3><pre><code class="lang-java"><span class="keyword">public</span> static <span class="literal">void</span> hello(<span class="built_in">String</span><span class="attribute">...</span> names) {
    Observable<span class="built_in">.</span>from(names)<span class="built_in">.</span>subscribe(<span class="literal">new</span> Action1<span class="subst">&lt;</span><span class="built_in">String</span><span class="subst">&gt;</span>() {

        @Override
        <span class="keyword">public</span> <span class="literal">void</span> call(<span class="built_in">String</span> s) {
            System<span class="built_in">.</span>out<span class="built_in">.</span>println(<span class="string">"Hello "</span> <span class="subst">+</span> s <span class="subst">+</span> <span class="string">"!"</span>);
        }

    });
}
</code></pre>
<pre><code class="lang-java"><span class="function"><span class="title">hello</span><span class="params">(<span class="string">"Ben"</span>, <span class="string">"George"</span>)</span>;
H<span class="title">ello</span> B<span class="title">en</span>!
H<span class="title">ello</span> G<span class="title">eorge</span>!</span>
</code></pre>
<h3 id="groovy">Groovy</h3><pre><code class="lang-groovy">def hello(String[] names) {
    Observable.from(names).subscribe { println <span class="string">"Hello <span class="subst">${it}</span>!"</span> }
}
</code></pre>
<pre><code class="lang-groovy"><span class="function"><span class="title">hello</span><span class="params">(<span class="string">"Ben"</span>, <span class="string">"George"</span>)</span>
H<span class="title">ello</span> B<span class="title">en</span>!
H<span class="title">ello</span> G<span class="title">eorge</span>!</span>
</code></pre>
<h3 id="clojure">Clojure</h3><pre><code class="lang-clojure"><span class="list">(<span class="title"><span class="built_in">defn</span></span> hello
  <span class="collection">[&amp;rest]</span>
  <span class="list">(<span class="title">-&gt;</span> <span class="list">(<span class="title">Observable/from</span> &amp;rest)</span>
    <span class="list">(<span class="title">.subscribe</span> #<span class="list">(<span class="title">println</span> <span class="list">(<span class="title"><span class="built_in">str</span></span> <span class="string">"Hello "</span> % <span class="string">"!"</span>)</span>)</span>)</span>)</span>)</span>
</code></pre>
<pre><code>(<span class="function_or_atom">hello</span> [<span class="string">"Ben"</span> <span class="string">"George"</span>])
<span class="variable">Hello</span> <span class="variable">Ben</span><span class="exclamation_mark">!</span>
<span class="variable">Hello</span> <span class="variable">George</span><span class="exclamation_mark">!</span>
</code></pre><h3 id="scala">Scala</h3><pre><code class="lang-scala">import rx.lang.scala.<span class="constant">Observable</span>

<span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(<span class="symbol">names:</span> <span class="constant">String</span>*)</span> </span>{
  <span class="constant">Observable</span>.from(names) subscribe { n =&gt;
    println(s<span class="string">"Hello $n!"</span>)
  }
}
</code></pre>
<pre><code class="lang-scala"><span class="function"><span class="title">hello</span><span class="params">(<span class="string">"Ben"</span>, <span class="string">"George"</span>)</span>
H<span class="title">ello</span> B<span class="title">en</span>!
H<span class="title">ello</span> G<span class="title">eorge</span>!</span>
</code></pre>
<h1 id="how_to_design_using_rxjava">How to Design Using RxJava</h1><p><p>To use RxJava you create Observables (which emit data items), transform those Observables in various ways to get the precise data items that interest you (by using Observable operators), and then observe and react to these sequences of interesting items (by implementing Observers or Subscribers and then subscribing them to the resulting transformed Observables).</p></p>
<h2 id="creating_observables">Creating Observables</h2><p><p>To create an Observable, you can either implement the Observable&#39;s behavior manually by passing a function to <a href="http://reactivex.io/documentations/operators/create.html"><code>create( )</code></a> that exhibits Observable behavior, or you can convert an existing data structure into an Observable by using <a href="Creating-Observables">some of the Observable operators that are designed for this purpose</a>.</p></p>
<h3 id="creating_an_observable_from_an_existing_data_structure">Creating an Observable from an Existing Data Structure</h3><p><p>You use the Observable <a href="http://reactivex.io/documentations/operators/just.html"><code>just( )</code></a> and <a href="http://reactivex.io/documentations/operators/from.html"><code>from( )</code></a> methods to convert objects, lists, or arrays of objects into Observables that emit those objects:</p></p>
<pre><code class="lang-groovy">Observable&lt;String&gt; o = Observable<span class="preprocessor">.from</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)<span class="comment">;</span>

def list = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]
Observable&lt;Integer&gt; o = Observable<span class="preprocessor">.from</span>(list)<span class="comment">;</span>

Observable&lt;String&gt; o = Observable<span class="preprocessor">.just</span>(<span class="string">"one object"</span>)<span class="comment">;</span>
</code></pre>
<p><p>These converted Observables will synchronously invoke the <a href="Observable#onnext-oncompleted-and-onerror"><code>onNext( )</code></a> method of any subscriber that subscribes to them, for each item to be emitted by the Observable, and will then invoke the subscriber’s <a href="Observable#onnext-oncompleted-and-onerror"><code>onCompleted( )</code></a> method.</p></p>
<h3 id="creating_an_observable_via_the_`create( )`_method">Creating an Observable via the <code>create( )</code> method</h3><p><p>You can implement asynchronous i/o, computational operations, or even “infinite” streams of data by designing your own Observable and implementing it with the <a href="http://reactivex.io/documentations/operators/create.html"><code>create( )</code></a> method.</p></p>
<h4 id="synchronous_observable_example">Synchronous Observable Example</h4><pre><code class="lang-groovy">/<span class="variable">**</span>
 * This example shows a custom Observable that blocks 
 * <span class="keyword">when</span> subscribed to (does <span class="keyword">not</span> spawn an extra thread).
 <span class="variable">*/</span>
def customObservableBlocking() {
    <span class="keyword">return</span> Observable.create { aSubscriber -&gt;
        <span class="number">50</span>.<span class="keyword">times</span> { i -&gt;
            <span class="keyword">if</span> (!aSubscriber.unsubscribed) {
                aSubscriber.onNext(<span class="string">"value_<span class="subst">${i}</span>"</span>)
            }
        }
        /<span class="regexp">/ after sending all values we complete the sequence
        if (!aSubscriber.unsubscribed) {
            aSubscriber.onCompleted()
        }
    }
}

/</span><span class="regexp">/ To see output:
customObservableBlocking().subscribe { println(it) }</span>
</code></pre>
<h4 id="asynchronous_observable_example">Asynchronous Observable Example</h4><p><p>The following example uses Groovy to create an Observable that emits 75 strings.</p>
<p>It is written verbosely, with static typing and implementation of the <code>Func1</code> anonymous inner class, to make the example more clear:</p></p>
<pre><code class="lang-groovy">/<span class="variable">**</span>
 * This example shows a custom Observable that does <span class="keyword">not</span> block
 * <span class="keyword">when</span> subscribed to as it spawns a separate thread.
 <span class="variable">*/</span>
def customObservableNonBlocking() {
    <span class="keyword">return</span> Observable.create({ subscriber -&gt;
        Thread.start {
            <span class="keyword">for</span> (i in <span class="number">0</span>..&lt;<span class="number">75</span>) {
                <span class="keyword">if</span> (subscriber.unsubscribed) {
                    <span class="keyword">return</span>
                }
                subscriber.onNext(<span class="string">"value_<span class="subst">${i}</span>"</span>)
            }
            /<span class="regexp">/ after sending all values we complete the sequence
            if (!subscriber.unsubscribed) {
                subscriber.onCompleted()
            }
        }
    } as Observable.OnSubscribe)
}

/</span><span class="regexp">/ To see output:
customObservableNonBlocking().subscribe { println(it) }</span>
</code></pre>
<p><p>Here is the same code in Clojure that uses a Future (instead of raw thread) and is implemented more consisely:</p></p>
<pre><code class="lang-clojure"><span class="list">(<span class="title"><span class="built_in">defn</span></span> customObservableNonBlocking <span class="collection">[]</span>
  <span class="string">"This example shows a custom Observable that does not block 
   when subscribed to as it spawns a separate thread.

  returns Observable&lt;String&gt;"</span>
  <span class="list">(<span class="title">Observable/create</span> 
    <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[subscriber]</span>
      <span class="list">(<span class="title"><span class="built_in">let</span></span> <span class="collection">[f <span class="list">(<span class="title"><span class="built_in">future</span></span> 
                <span class="list">(<span class="title"><span class="built_in">doseq</span></span> <span class="collection">[x <span class="list">(<span class="title"><span class="built_in">range</span></span><span class="number"> 50</span>)</span>]</span> <span class="list">(<span class="title">-&gt;</span> subscriber <span class="list">(<span class="title">.onNext</span> <span class="list">(<span class="title"><span class="built_in">str</span></span> <span class="string">"value_"</span> x)</span>)</span>)</span>)</span>
                <span class="comment">; after sending all values we complete the sequence</span>
                <span class="list">(<span class="title">-&gt;</span> subscriber .onCompleted)</span>)</span>
        ))
      ))</span></span></span></span></span>
</code></pre>
<pre><code class="lang-clojure"><span class="comment">; To see output</span>
<span class="list">(.subscribe <span class="list">(<span class="title">customObservableNonBlocking</span>)</span> #<span class="list">(<span class="title">println</span> %)</span>)</span>
</code></pre>
<p><p>Here is an example that fetches articles from Wikipedia and invokes onNext with each one:</p></p>
<pre><code class="lang-clojure"><span class="list">(<span class="title"><span class="built_in">defn</span></span> fetchWikipediaArticleAsynchronously <span class="collection">[wikipediaArticleNames]</span>
  <span class="string">"Fetch a list of Wikipedia articles asynchronously.

   return Observable&lt;String&gt; of HTML"</span>
  <span class="list">(<span class="title">Observable/create</span> 
    <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[subscriber]</span>
      <span class="list">(<span class="title"><span class="built_in">let</span></span> <span class="collection">[f <span class="list">(<span class="title"><span class="built_in">future</span></span>
                <span class="list">(<span class="title"><span class="built_in">doseq</span></span> <span class="collection">[articleName wikipediaArticleNames]</span>
                  <span class="list">(<span class="title">-&gt;</span> subscriber <span class="list">(<span class="title">.onNext</span> <span class="list">(<span class="title">http/get</span> <span class="list">(<span class="title"><span class="built_in">str</span></span> <span class="string">"http://en.wikipedia.org/wiki/"</span> articleName)</span>)</span>)</span>)</span>)</span>
                <span class="comment">; after sending response to onnext we complete the sequence</span>
                <span class="list">(<span class="title">-&gt;</span> subscriber .onCompleted)</span>)</span>
        ))))</span></span></span></span></span>
</code></pre>
<pre><code class="lang-clojure"><span class="list">(<span class="title">-&gt;</span> <span class="list">(<span class="title">fetchWikipediaArticleAsynchronously</span> <span class="collection">[<span class="string">"Tiger"</span> <span class="string">"Elephant"</span>]</span>)</span> 
  <span class="list">(<span class="title">.subscribe</span> #<span class="list">(<span class="title">println</span> <span class="string">"--- Article ---\n"</span> <span class="list">(<span class="title">subs</span> <span class="list">(<span class="attribute">:body</span> %)</span><span class="number"> 0</span><span class="number"> 125</span>)</span> <span class="string">"..."</span>)</span>)</span>)</span>
</code></pre>
<p><p>Back to Groovy, the same Wikipedia functionality but using closures instead of anonymous inner classes:</p></p>
<pre><code class="lang-groovy">/*
 * Fetch a list of Wikipedia articles asynchronously.
 <span class="variable">*/</span>
def fetchWikipediaArticleAsynchronously(String... wikipediaArticleNames) {
    <span class="keyword">return</span> Observable.create { subscriber -&gt;
        Thread.start {
            <span class="keyword">for</span> (articleName in wikipediaArticleNames) {
                <span class="keyword">if</span> (subscriber.unsubscribed) {
                    <span class="keyword">return</span>
                }
                subscriber.onNext(new URL(<span class="string">"http://en.wikipedia.org/wiki/<span class="subst">${articleName}</span>"</span>).text)
            }
            <span class="keyword">if</span> (!subscriber.unsubscribed) {
                subscriber.onCompleted()
            }
        }
        <span class="keyword">return</span> subscriber
    }
}

fetchWikipediaArticleAsynchronously(<span class="string">"Tiger"</span>, <span class="string">"Elephant"</span>)
    .subscribe { println <span class="string">"--- Article ---\n<span class="subst">${it.substring(<span class="number">0</span>, <span class="number">125</span>)}</span>"</span> }
</code></pre>
<p><p>Results:</p></p>
<pre><code class="lang-text">--- Article ---
 <span class="xml"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">dir</span>=<span class="value">"ltr"</span> <span class="attribute">class</span>=<span class="value">"client-nojs"</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">title</span>&gt;</span>Tiger - Wikipedia, the free encyclopedia<span class="tag">&lt;/<span class="title">title</span>&gt;</span> ...
--- Article ---
 <span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">dir</span>=<span class="value">"ltr"</span> <span class="attribute">class</span>=<span class="value">"client-nojs"</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">title</span>&gt;</span>Elephant - Wikipedia, the free encyclopedia<span class="tag">&lt;/<span class="title">tit</span> <span class="attribute">...</span></span></span>
</code></pre>
<p><p>Note that all of the above examples ignore error handling, for brevity. See below for examples that include error handling.</p>
<p>More information can be found on the <a href="creating-observables.html">Observable]] and [[Creating Observables</a> pages.</p></p>
<h2 id="transforming_observables_with_operators">Transforming Observables with Operators</h2><p><p>RxJava allows you to chain <em>operators</em> together to transform and compose Observables.</p>
<p>The following example, in Groovy, uses a previously defined, asynchronous Observable that emits 75 items, skips over the first 10 of these (<a href="http://reactivex.io/documentations/operators/skip.html"><code>skip(10)</code></a>), then takes the next 5 (<a href="http://reactivex.io/documentations/operators/take.html"><code>take(5)</code></a>), and transforms them (<a href="http://reactivex.io/documentations/operators/map.html"><code>map(...)</code></a>) before subscribing and printing the items:</p></p>
<pre><code class="lang-groovy"><span class="javadoc">/**
 * Asynchronously calls 'customObservableNonBlocking' and defines
 * a chain of operators to apply to the callback sequence.
 */</span>
<span class="keyword">def</span> simpleComposition() {
    customObservableNonBlocking().skip(<span class="number">10</span>).take(<span class="number">5</span>)
        .map({ stringValue -&gt; <span class="keyword">return</span> stringValue + <span class="string">"_xform"</span>})
        .subscribe({ println <span class="string">"onNext =&gt; "</span> + it})
}
</code></pre>
<p><p>This results in:</p></p>
<pre><code class="lang-text">onNext =&gt; value_10_xform
onNext =&gt; value_11_xform
onNext =&gt; value_12_xform
onNext =&gt; value_13_xform
onNext =&gt; value_14_xform
</code></pre>
<p><p>Here is a marble diagram that illustrates this transformation:</p>
<p><img src="/Netflix/RxJava/wiki/images/rx-operators/Composition.1.png" width="640" height="536" /></p>
<p>This next example, in Clojure, consumes three asynchronous Observables, including a dependency from one to another, and emits a single response item by combining the items emitted by each of the three Observables with the <a href="http://reactivex.io/documentations/operators/zip.html"><code>zip</code></a> operator and then transforming the result with <a href="http://reactivex.io/documentations/operators/map.html"><code>map</code></a>:</p></p>
<pre><code class="lang-clojure"><span class="list">(<span class="title"><span class="built_in">defn</span></span> getVideoForUser <span class="collection">[userId videoId]</span>
  <span class="string">"Get video metadata for a given userId
   - video metadata
   - video bookmark position
   - user data
  return Observable&lt;Map&gt;"</span>
    <span class="list">(<span class="title"><span class="built_in">let</span></span> <span class="collection">[user-observable <span class="list">(<span class="title">-&gt;</span> <span class="list">(<span class="title">getUser</span> userId)</span>
              <span class="list">(<span class="title">.map</span> <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[user]</span> <span class="collection">{<span class="attribute">:user-name</span> <span class="list">(<span class="attribute">:name</span> user)</span> <span class="attribute">:language</span> <span class="list">(<span class="attribute">:preferred-language</span> user)</span>}</span>)</span>)</span>)</span>
          bookmark-observable <span class="list">(<span class="title">-&gt;</span> <span class="list">(<span class="title">getVideoBookmark</span> userId videoId)</span>
              <span class="list">(<span class="title">.map</span> <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[bookmark]</span> <span class="collection">{<span class="attribute">:viewed-position</span> <span class="list">(<span class="attribute">:position</span> bookmark)</span>}</span>)</span>)</span>)</span>
          <span class="comment">; getVideoMetadata requires :language from user-observable so nest inside map function</span>
          video-metadata-observable <span class="list">(<span class="title">-&gt;</span> user-observable 
              <span class="list">(<span class="title">.mapMany</span>
                <span class="comment">; fetch metadata after a response from user-observable is received</span>
                <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[user-map]</span> 
                  <span class="list">(<span class="title">getVideoMetadata</span> videoId <span class="list">(<span class="attribute">:language</span> user-map)</span>)</span>)</span>)</span>)</span>]</span>
          <span class="comment">; now combine 3 observables using zip</span>
          <span class="list">(<span class="title">-&gt;</span> <span class="list">(<span class="title">Observable/zip</span> bookmark-observable video-metadata-observable user-observable 
                <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[bookmark-map metadata-map user-map]</span>
                  <span class="collection">{<span class="attribute">:bookmark-map</span> bookmark-map 
                  <span class="attribute">:metadata-map</span> metadata-map
                  <span class="attribute">:user-map</span> user-map}</span>)</span>)</span>
            <span class="comment">; and transform into a single response object</span>
            <span class="list">(<span class="title">.map</span> <span class="list">(<span class="title"><span class="built_in">fn</span></span> <span class="collection">[data]</span>
                  <span class="collection">{<span class="attribute">:video-id</span> videoId
                   <span class="attribute">:video-metadata</span> <span class="list">(<span class="attribute">:metadata-map</span> data)</span>
                   <span class="attribute">:user-id</span> userId
                   <span class="attribute">:language</span> <span class="list">(<span class="attribute">:language</span> <span class="list">(<span class="attribute">:user-map</span> data)</span>)</span>
                   <span class="attribute">:bookmark</span> <span class="list">(<span class="attribute">:viewed-position</span> <span class="list">(<span class="attribute">:bookmark-map</span> data)</span>)</span>
                  }</span>)</span>)</span>)</span>)</span>)</span>
</code></pre>
<p><p>The response looks like this:</p></p>
<pre><code class="lang-clojure">{<span class="symbol">:video-id</span> <span class="number">78965</span>, 
 <span class="symbol">:video-metadata</span> {<span class="symbol">:video-id</span> <span class="number">78965</span>, <span class="symbol">:title</span> <span class="constant">House</span> of <span class="constant">Cards</span><span class="symbol">:</span> <span class="constant">Episode</span> <span class="number">1</span>, 
                  <span class="symbol">:director</span> <span class="constant">David</span> <span class="constant">Fincher</span>, <span class="symbol">:duration</span> <span class="number">3365</span>}, 
 <span class="symbol">:user-id</span> <span class="number">12345</span>, <span class="symbol">:language</span> es-us, <span class="symbol">:bookmark</span> <span class="number">0</span>}
</code></pre>
<p><p>And here is a marble diagram that illustrates how that code produces that response:</p>
<p><img src="/Netflix/RxJava/wiki/images/rx-operators/Composition.2.png" width="640" height="742" /></p>
<p>The following example, in Groovy, comes from <a href="https://speakerdeck.com/benjchristensen/evolution-of-the-netflix-api-qcon-sf-2013">Ben Christensen’s QCon presentation on the evolution of the Netflix API</a>. It combines two Observables with the <a href="http://reactivex.io/documentations/operators/merge.html"><code>merge</code></a> operator, then uses the <a href="http://reactivex.io/documentations/operators/reduce.html"><code>reduce</code></a> operator to construct a single item out of the resulting sequence, then transforms that item with <a href="http://reactivex.io/documentations/operators/map.html"><code>map</code></a> before emitting it:</p></p>
<pre><code class="lang-groovy">public <span class="constant">Observable</span> getVideoSummary(<span class="constant">APIVideo</span> video) {
   <span class="function"><span class="keyword">def</span> <span class="title">seed</span> </span>= [<span class="symbol">id:</span>video.id, <span class="symbol">title:</span>video.getTitle()];
   <span class="function"><span class="keyword">def</span> <span class="title">bookmarkObservable</span> </span>= getBookmark(video);
   <span class="function"><span class="keyword">def</span> <span class="title">artworkObservable</span> </span>= getArtworkImageUrl(video);
   <span class="keyword">return</span>( <span class="constant">Observable</span>.merge(bookmarkObservable, artworkObservable)
      .reduce(seed, { aggregate, current -&gt; aggregate &lt;&lt; current })
      .map({ [(video.id.toString() <span class="symbol">:</span> it] }))
}
</code></pre>
<p><p>And here is a marble diagram that illustrates how that code uses the <a href="http://reactivex.io/documentations/operators/reduce.html"><code>reduce</code></a> operator to bring the results from multiple Observables together in one structure:</p>
<p><img src="/Netflix/RxJava/wiki/images/rx-operators/Composition.3.png" width="640" height="640" /></p></p>
<h2 id="error_handling">Error Handling</h2><p><p>Here is a version of the Wikipedia example from above revised to include error handling:</p></p>
<pre><code class="lang-groovy"><span class="comment">/*
 * Fetch a list of Wikipedia articles asynchronously, with error handling.
 */</span>
def fetchWikipediaArticleAsynchronouslyWithErrorHandling(String... wikipediaArticleNames) {
    return Observable<span class="preprocessor">.create</span>({ subscriber -&gt;
        Thread<span class="preprocessor">.start</span> {
            try {
                for (articleName <span class="keyword">in</span> wikipediaArticleNames) {
                    if (true == subscriber<span class="preprocessor">.isUnsubscribed</span>()) {
                        return<span class="comment">;</span>
                    }
                    subscriber<span class="preprocessor">.onNext</span>(new URL(<span class="string">"http://en.wikipedia.org/wiki/"</span>+articleName)<span class="preprocessor">.getText</span>())<span class="comment">;</span>
                }
                if (false == subscriber<span class="preprocessor">.isUnsubscribed</span>()) {
                    subscriber<span class="preprocessor">.onCompleted</span>()<span class="comment">;</span>
                }
            } catch(Throwable t) {
                if (false == subscriber<span class="preprocessor">.isUnsubscribed</span>()) {
                    subscriber<span class="preprocessor">.onError</span>(t)<span class="comment">;</span>
                }
            }
            return (subscriber)<span class="comment">;</span>
        }
    })<span class="comment">;</span>
}
</code></pre>
<p><p>Notice how it now invokes <a href="Observable#onnext-oncompleted-and-onerror"><code>onError(Throwable t)</code></a> if an error occurs and note that the following code passes <a href="http://reactivex.io/documentations/operators/subscribe.html"><code>subscribe()</code></a> a second method that handles <code>onError</code>:</p></p>
<pre><code class="lang-groovy"><span class="comment">fetchWikipediaArticleAsynchronouslyWithErrorHandling("Tiger"</span><span class="string">,</span> <span class="comment">"NonExistentTitle"</span><span class="string">,</span> <span class="comment">"Elephant")</span>
    <span class="string">.</span><span class="comment">subscribe(</span>
        <span class="comment">{</span> <span class="comment">println</span> <span class="comment">"</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">Article</span> <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">\n"</span> <span class="literal">+</span> <span class="comment">it</span><span class="string">.</span><span class="comment">substring(0</span><span class="string">,</span> <span class="comment">125)</span> <span class="comment">}</span><span class="string">,</span> 
        <span class="comment">{</span> <span class="comment">println</span> <span class="comment">"</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">Error</span> <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">\n"</span> <span class="literal">+</span> <span class="comment">it</span><span class="string">.</span><span class="comment">getMessage()</span> <span class="comment">})</span>
</code></pre>
<p><p>See the <a href="Error-Handling-Operators">Error-Handling-Operators</a> page for more information on specialized error handling techniques in RxJava, including methods like <a href="http://reactivex.io/documentations/operators/catch.html"><code>onErrorResumeNext()</code></a> and <a href="http://reactivex.io/documentations/operators/catch.html"><code>onErrorReturn()</code></a> that allow Observables to continue with fallbacks in the event that they encounter errors.</p>
<p>Here is an example of how you can use such a method to pass along custom information about any exceptions you encounter. Imagine you have an Observable or cascade of Observables — <code>myObservable</code> — and you want to intercept any exceptions that would normally pass through to an Subscriber’s <code>onError</code> method, replacing these with a customized Throwable of your own design. You could do this by modifying <code>myObservable</code> with the <a href="http://reactivex.io/documentations/operators/catch.html"><code>onErrorResumeNext()</code></a> method, and passing into that method an Observable that calls <code>onError</code> with your customized Throwable (a utility method called <a href="http://reactivex.io/documentations/operators/empty-never-throw.html"><code>error()</code></a> will generate such an Observable for you):</p></p>
<pre><code class="lang-groovy">myModifiedObservable = myObservable<span class="preprocessor">.onErrorResumeNext</span>({ t -&gt;
   Throwable myThrowable = myCustomizedThrowableCreator(t)<span class="comment">;</span>
   return (Observable<span class="preprocessor">.error</span>(myThrowable))<span class="comment">;</span>
})<span class="comment">;</span>
</code></pre>

            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</body>
</html>
